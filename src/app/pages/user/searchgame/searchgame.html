<div class="container">
  <app-header></app-header>

  <div class="searchgame">
    <div class="editgame">

      <!-- Search Bar (อยู่บนสุด) -->
      <div class="search-top">
        <div class="search-container">
          <i class="fa-solid fa-search search-icon"></i>
          <input
            type="text"
            class="search-input"
            placeholder="Search games..."
            [(ngModel)]="searchTerm"
            (input)="filterGames()"
          />
        </div>
      </div>

      <!-- Header Section -->
      <div class="page-header">
        <h2 class="title">Search game</h2>
      </div>

      <!-- Filter Section -->
      <div class="filter-bar">
        <label for="categorySelect">Filter by category:</label>
        <select id="categorySelect" [(ngModel)]="selectedCategory" (change)="filterGames()">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <!-- Game Grid -->
      <div class="game-grid">
        <div class="game-card" *ngFor="let game of filteredGames">
          <div class="card-image" >
            <ng-container *ngIf="game.image_url; else placeholder" >
              <img [src]="game.image_url" [alt]="game.title"  (click)="viewGameDetails(game.id)"/>
              <span class="edition-tag">THIS EDITION</span>
            </ng-container>
            <ng-template #placeholder>
              <div class="image-placeholder"></div>
            </ng-template>
          </div>

          <div class="card-content">
            <h3 class="game-title">{{ game.title }}</h3>
            <p class="game-price">฿{{ game.price?.toFixed(2) }}</p>
            <p class="game-description">{{ game.description }}</p>
            <p class="game-category" *ngIf="game.category">
              category : {{ game.category }}
            </p>
          </div>

          <div class="card-actions">
            <button class="detail-btn" (click)="viewGameDetails(game.id)">
              <i class="fa-solid fa-circle-info"></i> ดูรายละเอียด
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
